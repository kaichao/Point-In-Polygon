package pip;

import static org.junit.Assert.*;

import java.io.FileOutputStream;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;

import org.junit.After;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;

import cnic.pip.PointInPolygonOperator;
import cnic.pip.PointMock;
import cnic.pip.PolygonMock;
import cnic.pip.impl.CnicPIP;
import cnic.pip.impl.EsriPIP;
import cnic.pip.impl.JtsPIP;

public class FunctionTests {

	@BeforeClass
	public static void setUpBeforeClass() throws Exception {
	}

	@AfterClass
	public static void tearDownAfterClass() throws Exception {
	}

	String poly;
	PointInPolygonOperator pip;
	@Before
	public void setUp() throws Exception {
		poly = "MULTIPOLYGON(((-2 -1,-2 1, 2 1, 2 -1, -2 -1)))";
		polygon = new PolygonMock(muhe);
	}

	@After
	public void tearDown() throws Exception {
	}
//	@Test
	public void testJTS() {
		pip = new JtsPIP();
		doTest();
	}
//	@Test
	public void testESRI() {
		pip = new EsriPIP();
		doTest();
	}

	@Test
	public void testCNIC() throws Exception {
		PrintWriter out = new PrintWriter(new OutputStreamWriter(new FileOutputStream("/tmp/pip.conf")),true);
		out.println("ppd=1000000");
		out.println("x0=-4");
		out.println("x1=4");
		out.println("y0=-2");
		out.println("y1=2");
		out.close();

		pip = new CnicPIP();
//		((CnicPIP)pip).setEvenlopeExt(-4.1, 43, -2.7, 2.9, 100);
//		((CnicPIP)pip).setEvenlopeExt(-4, 4, -2, 2, 1);
		doTest();
	}
	// epsilon > tolerance
	private double epsilon = 1.1e-8;
	// eps < tolerance
	private double eps = 5e-9;
	String s1 = "MULTIPOLYGON(((-2 -1,-2 1, 2 1, 2 -1, -2 -1)))";
	private PolygonMock polygon;
	private void doTest(){
		assertTrue(pip.contains(polygon, new PointMock(0,0)));

		assertFalse(pip.contains(polygon, new PointMock(-3,0)));
		assertFalse(pip.contains(polygon, new PointMock(-2-epsilon,0)));
		assertFalse(pip.contains(polygon, new PointMock(-2,0)));
		assertFalse(pip.contains(polygon, new PointMock(-2+eps,0)));
		assertTrue(pip.contains(polygon, new PointMock(-2+epsilon,0)));
		assertTrue(pip.contains(polygon, new PointMock(2-epsilon,0)));
		assertFalse(pip.contains(polygon, new PointMock(2-eps,0)));
		assertFalse(pip.contains(polygon, new PointMock(2,0)));
		assertFalse(pip.contains(polygon, new PointMock(2+epsilon,0)));
		assertFalse(pip.contains(polygon, new PointMock(3,0)));

		assertFalse(pip.contains(polygon, new PointMock(0,-1.5)));
		assertFalse(pip.contains(polygon, new PointMock(0,-1-epsilon)));
		assertFalse(pip.contains(polygon, new PointMock(0,-1)));
		assertFalse(pip.contains(polygon, new PointMock(0,-1+eps)));
		assertTrue(pip.contains(polygon, new PointMock(0,-1+epsilon)));
		assertTrue(pip.contains(polygon, new PointMock(0,1-epsilon)));
		assertFalse(pip.contains(polygon, new PointMock(0,1-eps)));
		assertFalse(pip.contains(polygon, new PointMock(0,1)));
		assertFalse(pip.contains(polygon, new PointMock(0,1+epsilon)));
		assertFalse(pip.contains(polygon, new PointMock(0,1.5)));
	}

	
	String muhe = "MULTIPOLYGON(((122.780100001129 52.2513009986432,122.774460001129 52.2535289986432,122.770320001129 52.2555469986432,122.761250001129 52.2609439986432,122.755930001129 52.2654609986432,122.750730001129 52.2649539986432,122.734880001129 52.2588579986432,122.723010001129 52.2573699986432,122.711880001129 52.2561149986432,122.703710001129 52.2548899986432,122.689060001129 52.2602269986432,122.689580001129 52.2691419986432,122.671910001129 52.2753559986432,122.644350001129 52.2755199986432,122.638850001129 52.2724949986432,122.632930001129 52.2708279986432,122.615110001129 52.2692639986432,122.601360001129 52.2682039986432,122.586180001129 52.2652929986432,122.579120001129 52.2652089986432,122.553700001129 52.2813759986432,122.541340001129 52.2837489986432,122.534590001129 52.2852709986432,122.522620001129 52.2867279986432,122.500270001129 52.2871509986432,122.489730001129 52.2906799986432,122.470980001129 52.2947999986432,122.465610001129 52.2995299986432,122.466630001129 52.3025129986432,122.471510001129 52.3133129986432,122.469530001129 52.3171729986432,122.467090001129 52.3235399986432,122.470280001129 52.3286089986432,122.473430001129 52.3352699986432,122.477010001129 52.3401179986432,122.474950001129 52.3464889986432,122.466160001129 52.3530079986432,122.455430001129 52.3620189986432,122.450710001129 52.3697319986432,122.448160001129 52.3792949986432,122.444950001129 52.3861119986432,122.439900001129 52.3924479986432,122.432430001129 52.3921239986432,122.422010001129 52.3798869986432,122.409190001129 52.3726389986432,122.400480001129 52.3761859986432,122.396120001129 52.3841289986432,122.390280001129 52.3911359986432,122.373410001129 52.3932079986432,122.369190001129 52.3965799986432,122.363980001129 52.4070209986432,122.359700001129 52.4122199986432,122.343340001129 52.4099499986432,122.336190001129 52.4114569986432,122.333400001129 52.4164469986432,122.331520001129 52.4273909986432,122.323840001129 52.4334559986432,122.322870001129 52.4398419986432,122.321970001129 52.4441719986432,122.318860001129 52.4580729986432,122.309930001129 52.4675519986432,122.303340001129 52.4738619986432,122.292420001129 52.4762269986432,122.278240001129 52.4753459986432,122.260090001129 52.4702989986432,122.247390001129 52.4696619986432,122.231690001129 52.4694399986432,122.223420001129 52.4704669986432,122.200700001129 52.4678539986432,122.183980001129 52.4749219986432,122.178070001129 52.4826129986432,122.171940001129 52.4864039986432,122.167520001129 52.4941099986432,122.161960001129 52.5120849986432,122.158910001129 52.5134119986432,122.151420001129 52.5135269986432,122.138020001129 52.5112719986432,122.132190001129 52.5072979986432,122.134690001129 52.5009349986432,122.134990001129 52.4933969986432,122.123720001129 52.4850009986432,122.126370001129 52.4745289986432,122.117180001129 52.4705049986432,122.108760001129 52.4658049986432,122.105010001129 52.4568329986432,122.100010001129 52.4510419986432,122.084650001129 52.4425809986432,122.073210001129 52.4387439986432,122.077610001129 52.4317279986432,122.083840001129 52.4256549986432,122.074380001129 52.4193379986432,122.052930001129 52.4139749986432,122.033230001129 52.4116059986432,122.036610001129 52.4020609986432,122.040330001129 52.3934359986432,122.028360001129 52.3761019986432,122.018530001129 52.3700029986432,122.010480001129 52.3664469986432,122.003470001129 52.3642769986432,121.981350001129 52.3492889986432,121.973300001129 52.3455009986432,121.969700001129 52.3424679986432,121.966260001129 52.3360139986432,121.962200001129 52.3261179986432,121.951520001129 52.3231999986432,121.949450001129 52.3195079986432,121.948840001129 52.3160709986432,121.947590001129 52.3107909986432,121.946010001129 52.3041339986432,121.940730001129 52.2971919986432,121.920040001129 52.2845039986432,121.907910001129 52.2810969986432,121.901990001129 52.2803119986432,121.893820001129 52.2794839986432,121.878520001129 52.2801359986432,121.857890001129 52.2832069986432,121.848980001129 52.2825929986432,121.834140001129 52.2814179986432,121.828130001129 52.2824549986432,121.823170001129 52.2851099986432,121.799980001129 52.2949789986432,121.789350001129 52.2991289986432,121.781040001129 52.3014949986432,121.768960001129 52.3047069986432,121.762150001129 52.3068659986432,121.748560001129 52.3105009986432,121.738090001129 52.3112219986432,121.711830001129 52.3146209986432,121.706870001129 52.3168139986432,121.706340001129 52.3200039986432,121.707800001129 52.3282589986432,121.708260001129 52.3417549986432,121.701440001129 52.3514559986432,121.697170001129 52.3548049986432,121.691390001129 52.3585779986432,121.686130001129 52.3667069986432,121.673700001129 52.3765299986432,121.663670001129 52.3829649986432,121.651410001129 52.3891369986432,121.655820001129 52.3979069986432,121.671600001129 52.4185489986432,121.670010001129 52.4205779986432,121.658890001129 52.4260789986432,121.647000001129 52.4320219986432,121.643360001129 52.4374389986432,121.640920001129 52.4412769986432,121.632980001129 52.4431839986432,121.612120001129 52.4416349986432,121.595730001129 52.4403989986432,121.583310001129 52.4419819986432,121.578290001129 52.4450839986432,121.570070001129 52.4520069986432,121.558110001129 52.4590839986432,121.547960001129 52.4600259986432,121.532040001129 52.4569589986432,121.519150001129 52.4530409986432,121.511540001129 52.4554019986432,121.500580001129 52.4714049986432,121.491970001129 52.4783129986432,121.476090001129 52.4814189986432,121.468960001129 52.4817279986432,121.458880001129 52.4881519986432,121.430390001129 52.4955519986432,121.418560001129 52.4994199986432,121.410980001129 52.5010869986432,121.401390001129 52.5052259986432,121.397030001129 52.5227359986432,121.390900001129 52.5251239986432,121.384000001129 52.5279429986432,121.370110001129 52.5283319986432,121.354430001129 52.5273059986432,121.348810001129 52.5338129986432,121.328480001129 52.5482289986432,121.317860001129 52.5569149986432,121.318150001129 52.5646969986432,121.315630001129 52.5694389986432,121.280790001129 52.5812419986432,121.269460001129 52.5825879986432,121.256030001129 52.5813749986432,121.247910001129 52.5791319986432,121.240500001129 52.5775949986432,121.225620001129 52.5754239986432,121.216320001129 52.5742989986432,121.207120001129 52.5775179986432,121.190390001129 52.5871929986432,121.184320001129 52.5943679986432,121.192840001129 52.6023409986432,121.220540001129 52.6160089986432,121.229610001129 52.6212429986432,121.232540001129 52.6286319986432,121.244990001129 52.6339419986432,121.260580001129 52.6370349986432,121.274980001129 52.6412429986432,121.283260001129 52.6473769986432,121.283120001129 52.6560589986432,121.288060001129 52.6614299986432,121.311930001129 52.6711009986432,121.321060001129 52.6756439986432,121.333620001129 52.6795809986432,121.338190001129 52.6785349986432,121.362880001129 52.6806719986432,121.369150001129 52.6828609986432,121.377170001129 52.6873819986432,121.380940001129 52.6936299986432,121.392620001129 52.7000539986432,121.417020001129 52.7142909986432,121.425570001129 52.7229309986432,121.440670001129 52.7287289986432,121.458430001129 52.7480769986432,121.465410001129 52.7580529986432,121.465020001129 52.7651329986432,121.471570001129 52.7693819986432,121.476270001129 52.7729069986432,121.497170001129 52.7765389986432,121.504600001129 52.7785189986432,121.508880001129 52.7829479986432,121.517850001129 52.7913589986432,121.522150001129 52.7955589986432,121.547380001129 52.8102419986432,121.561030001129 52.8160019986432,121.571110001129 52.8180239986432,121.573510001129 52.8224179986432,121.594380001129 52.8347129986432,121.599690001129 52.8412169986432,121.605060001129 52.8468129986432,121.613470001129 52.8520009986432,121.607590001129 52.8635479986432,121.600590001129 52.8675309986432,121.596920001129 52.8727109986432,121.599660001129 52.8780249986432,121.602070001129 52.8824159986432,121.600750001129 52.8860509986432,121.599420001129 52.8899119986432,121.602670001129 52.8927149986432,121.622990001129 52.8944819986432,121.628060001129 52.8986929986432,121.635970001129 52.9063869986432,121.647980001129 52.9082179986432,121.655560001129 52.9152179986432,121.662030001129 52.9217449986432,121.668650001129 52.9328379986432,121.669850001129 52.9390369986432,121.670230001129 52.9465869986432,121.673100001129 52.9496119986432,121.677390001129 52.9544939986432,121.684240001129 52.9612539986432,121.688060001129 52.9679569986432,121.694470001129 52.9760739986432,121.700220001129 52.9823529986432,121.700680001129 52.9883079986432,121.704250001129 52.9927139986432,121.708220001129 52.9964449986432,121.715290001129 52.9988629986432,121.726930001129 53.0011329986432,121.737450001129 53.0029259986432,121.748610001129 53.0070149986432,121.757870001129 53.0115279986432,121.778720001129 53.0189859986432,121.782490001129 53.0270539986432,121.785260001129 53.0325889986432,121.787490001129 53.0415419986432,121.791310001129 53.0489269986432,121.795650001129 53.0533489986432,121.805620001129 53.0590099986432,121.809170001129 53.0641059986432,121.796300001129 53.0714189986432,121.781640001129 53.0764159986432,121.780230001129 53.0821079986432,121.766430001129 53.0928339986432,121.772790001129 53.1025509986432,121.770990001129 53.1082339986432,121.767650001129 53.1143459986432,121.765450001129 53.1207049986432,121.751150001129 53.1412539986432,121.743260001129 53.1472849986432,121.727830001129 53.1440319986432,121.715670001129 53.1440389986432,121.691820001129 53.1573139986432,121.679150001129 53.1598239986432,121.668330001129 53.1630519986432,121.662370001129 53.1681939986432,121.646140001129 53.1804659986432,121.645080001129 53.1863899986432,121.653040001129 53.1943089986432,121.668500001129 53.1971169986432,121.666210001129 53.2046169986432,121.664700001129 53.2192229986432,121.670390001129 53.2273289986432,121.670650001129 53.2369349986432,121.665130001129 53.2407189986432,121.659870001129 53.2467959986432,121.628750001129 53.2592389986432,121.612550001129 53.2554969986432,121.601260001129 53.2600859986432,121.595200001129 53.2665979986432,121.576140001129 53.2808609986432,121.567460001129 53.2864069986432,121.555050001129 53.2902789986432,121.550250001129 53.2942999986432,121.540640001129 53.3027989986432,121.531600001129 53.3076479986432,121.512730001129 53.3109319986432,121.500350001129 53.3138889986432,121.497690001129 53.3206939986432,121.488270001129 53.3325959986432,121.488440001129 53.3326489986432,121.499540001129 53.3360059986432,121.518410001129 53.3391909986432,121.539070001129 53.3417209986432,121.573750001129 53.3481749986432,121.584040001129 53.3496439986432,121.593670001129 53.3532369986432,121.603810001129 53.3578109986432,121.613270001129 53.3633649986432,121.622920001129 53.3667979986432,121.635000001129 53.3710439986432,121.646440001129 53.3733329986432,121.660650001129 53.3779069986432,121.667350001129 53.3828049986432,121.674870001129 53.3855819986432,121.684010001129 53.3891749986432,121.697240001129 53.3899959986432,121.703940001129 53.3901559986432,121.710960001129 53.3883589986432,121.718480001129 53.3863979986432,121.725830001129 53.3855819986432,121.732530001129 53.3857459986432,121.737270001129 53.3867259986432,121.742490001129 53.3878709986432,121.753600001129 53.3912999986432,121.765200001129 53.3948939986432,121.776470001129 53.3976709986432,121.784800001129 53.3997959986432,121.791820001129 53.4025729986432,121.803590001129 53.4074749986432,121.809960001129 53.4100879986432,121.818290001129 53.4133529986432,121.823030001129 53.4143329986432,121.828740001129 53.4143329986432,121.837730001129 53.4153139986432,121.845410001129 53.4162939986432,121.852590001129 53.4200519986432,121.859780001129 53.4229929986432,121.866320001129 53.4249529986432,121.873180001129 53.4254419986432,121.878400001129 53.4247889986432,121.889680001129 53.4228289986432,121.898660001129 53.4210319986432,121.905030001129 53.4202159986432,121.909770001129 53.4208679986432,121.913860001129 53.4218479986432,121.919240001129 53.4229929986432,121.923820001129 53.4238089986432,121.929700001129 53.4246249986432,121.942600001129 53.4262579986432,121.953550001129 53.4280549986432,121.964820001129 53.4287109986432,121.972990001129 53.4293629986432,121.981640001129 53.4291989986432,121.993080001129 53.4287109986432,122.005330001129 53.4280549986432,122.017910001129 53.4264219986432,122.029510001129 53.4249529986432,122.039630001129 53.4229929986432,122.050090001129 53.4208679986432,122.062020001129 53.4190709986432,122.073130001129 53.4185829986432,122.089460001129 53.4203799986432,122.103020001129 53.4234809986432,122.115270001129 53.4295269986432,122.124580001129 53.4388389986432,122.135040001129 53.4484749986432,122.142390001129 53.4568059986432,122.147290001129 53.4620359986432,122.152030001129 53.4657899986432,122.157910001129 53.4684069986432,122.161830001129 53.4698749986432,122.166560001129 53.4703669986432,122.175880001129 53.4706919986432,122.184530001129 53.4693869986432,122.211810001129 53.4626879986432,122.221290001129 53.4600749986432,122.226190001129 53.4595829986432,122.229950001129 53.4600749986432,122.238280001129 53.4607279986432,122.245960001129 53.4626879986432,122.264750001129 53.4705279986432,122.291450001129 53.4795149986432,122.301910001129 53.4876819986432,122.308770001129 53.4935609986432,122.318240001129 53.4978099986432,122.329680001129 53.5000949986432,122.339480001129 53.5007509986432,122.347650001129 53.4991149986432,122.351240001129 53.4955219986432,122.354510001129 53.4912759986432,122.357120001129 53.4863739986432,122.361050001129 53.4831089986432,122.366600001129 53.4762459986432,122.370190001129 53.4729799986432,122.388490001129 53.4615439986432,122.405480001129 53.4514159986432,122.416590001129 53.4461899986432,122.431290001129 53.4429209986432,122.445990001129 53.4429209986432,122.456440001129 53.4452099986432,122.470820001129 53.4530489986432,122.482580001129 53.4546849986432,122.493690001129 53.4546849986432,122.506760001129 53.4523959986432,122.520480001129 53.4510879986432,122.536490001129 53.4510879986432,122.545960001129 53.4533769986432,122.558050001129 53.4559899986432,122.573080001129 53.4576229986432,122.586470001129 53.4612159986432,122.600200001129 53.4625239986432,122.623720001129 53.4615439986432,122.639400001129 53.4608919986432,122.650180001129 53.4602389986432,122.658360001129 53.4592589986432,122.672730001129 53.4579509986432,122.694950001129 53.4582789986432,122.718800001129 53.4582789986432,122.738400001129 53.4602389986432,122.753430001129 53.4608919986432,122.768780001129 53.4595829986432,122.781520001129 53.4582789986432,122.798520001129 53.4559899986432,122.811580001129 53.4550089986432,122.834120001129 53.4556619986432,122.851440001129 53.4553379986432,122.866800001129 53.4579509986432,122.886070001129 53.4608919986432,122.895220001129 53.4631769986432,122.905020001129 53.4644849986432,122.912210001129 53.4677509986432,122.921680001129 53.4739609986432,122.937040001129 53.4814759986432,122.953380001129 53.4860499986432,122.972000001129 53.4880069986432,122.981480001129 53.4899669986432,122.999110001129 53.4935609986432,123.016430001129 53.4968299986432,123.029170001129 53.4984629986432,123.038320001129 53.4991149986432,123.043220001129 53.4994429986432,123.049100001129 53.5017319986432,123.057270001129 53.5046689986432,123.066420001129 53.5053249986432,123.075240001129 53.5049969986432,123.100720001129 53.5030359986432,123.118690001129 53.4994429986432,123.133390001129 53.4958499986432,123.140580001129 53.4965019986432,123.164760001129 53.5040169986432,123.178480001129 53.5121839986432,123.190240001129 53.5223119986432,123.207890001129 53.5373419986432,123.224220001129 53.5471419986432,123.241210001129 53.5533519986432,123.258200001129 53.5566179986432,123.272250001129 53.5579259986432,123.286290001129 53.5566179986432,123.300990001129 53.5546569986432,123.311450001129 53.5536769986432,123.321250001129 53.5513919986432,123.328770001129 53.5494309986432,123.337590001129 53.5468179986432,123.348050001129 53.5425679986432,123.361110001129 53.5399549986432,123.380070001129 53.5353809986432,123.398690001129 53.5340769986432,123.414040001129 53.5344009986432,123.428410001129 53.5340769986432,123.438870001129 53.5330959986432,123.447040001129 53.5298269986432,123.450630001129 53.5246009986432,123.454220001129 53.5206789986432,123.459780001129 53.5121839986432,123.465660001129 53.5076099986432,123.470890001129 53.5017319986432,123.477420001129 53.4978099986432,123.482320001129 53.4961779986432,123.486900001129 53.4955219986432,123.494420001129 53.4971579986432,123.495720001129 53.5010759986432,123.496380001129 53.5036889986432,123.496050001129 53.5072859986432,123.494090001129 53.5112039986432,123.490490001129 53.5157779986432,123.482650001129 53.5229679986432,123.479060001129 53.5311359986432,123.479710001129 53.5379939986432,123.488530001129 53.5461619986432,123.498010001129 53.5507349986432,123.509450001129 53.5543329986432,123.517940001129 53.5546569986432,123.526760001129 53.5520439986432,123.534930001129 53.5484499986432,123.544400001129 53.5435489986432,123.548970001129 53.5386509986432,123.549630001129 53.5327679986432,123.547010001129 53.5278659986432,123.538190001129 53.5200269986432,123.529700001129 53.5144729986432,123.527080001129 53.5089189986432,123.528390001129 53.5023839986432,123.532310001129 53.4961779986432,123.536890001129 53.4945409986432,123.544400001129 53.4958499986432,123.557140001129 53.5017319986432,123.564000001129 53.5082629986432,123.567600001129 53.5164339986432,123.571190001129 53.5291749986432,123.574460001129 53.5376699986432,123.577400001129 53.5425679986432,123.581970001129 53.5464899986432,123.590470001129 53.5474699986432,123.604840001129 53.5468179986432,123.612690001129 53.5448569986432,123.623140001129 53.5428959986432,123.632610001129 53.5402829986432,123.641760001129 53.5350529986432,123.654830001129 53.5272139986432,123.667570001129 53.5164339986432,123.672470001129 53.5108799986432,123.677700001129 53.5049969986432,123.684560001129 53.4994429986432,123.687500001129 53.4958499986432,123.690440001129 53.4935609986432,123.695010001129 53.4919279986432,123.701870001129 53.4909479986432,123.711350001129 53.4909479986432,123.723760001129 53.4925799986432,123.730630001129 53.4935609986432,123.739120001129 53.4945409986432,123.753820001129 53.4935609986432,123.763950001129 53.4929079986432,123.773750001129 53.4906229986432,123.795320001129 53.4876819986432,123.810670001129 53.4863739986432,123.825050001129 53.4873539986432,123.843670001129 53.4870299986432,123.858380001129 53.4850689986432,123.865560001129 53.4837609986432,123.872750001129 53.4808199986432,123.886800001129 53.4749409986432,123.902800001129 53.4670979986432,123.918490001129 53.4589309986432,123.930250001129 53.4546849986432,123.942010001129 53.4488029986432,123.952470001129 53.4439009986432,123.960300001129 53.4386749986432,123.970760001129 53.4327929986432,123.978280001129 53.4275669986432,123.983510001129 53.4210319986432,123.991020001129 53.4125369986432,124.001800001129 53.4040409986432,124.012250001129 53.3981629986432,124.024020001129 53.3945689986432,124.031860001129 53.3929329986432,124.039050001129 53.3922809986432,124.046880001129 53.3906479986432,124.055380001129 53.3880349986432,124.062900001129 53.3854219986432,124.068780001129 53.3792109986432,124.072370001129 53.3694109986432,124.077600001129 53.3632049986432,124.083480001129 53.3605879986432,124.088710001129 53.3583029986432,124.093280001129 53.3543819986432,124.098500001129 53.3514399986432,124.104390001129 53.3488269986432,124.115170001129 53.3458859986432,124.123660001129 53.3449059986432,124.134450001129 53.3458859986432,124.152410001129 53.3537289986432,124.164510001129 53.3583029986432,124.174960001129 53.3638569986432,124.183780001129 53.3684309986432,124.192280001129 53.3710439986432,124.204690001129 53.3746379986432,124.214160001129 53.3749659986432,124.222660001129 53.3739849986432,124.233760001129 53.3720249986432,124.243570001129 53.3687589986432,124.255650001129 53.3615679986432,124.266430001129 53.3553619986432,124.282900001129 53.3501509986432,124.283120001129 53.3499829986432,124.271930001129 53.3377189986432,124.253370001129 53.3133319986432,124.251000001129 53.3048819986432,124.241380001129 53.2962269986432,124.232570001129 53.2909999986432,124.217240001129 53.2823639986432,124.198490001129 53.2735059986432,124.189690001129 53.2691839986432,124.182770001129 53.2618939986432,124.180350001129 53.2452159986432,124.177600001129 53.2342569986432,124.176760001129 53.2244299986432,124.169870001129 53.2194249986432,124.157650001129 53.2144279986432,124.147350001129 53.2117079986432,124.135930001129 53.2110479986432,124.126420001129 53.2108379986432,124.114250001129 53.2120089986432,124.107040001129 53.2147639986432,124.097530001129 53.2156979986432,124.083450001129 53.2150379986432,124.071250001129 53.2109449986432,124.061330001129 53.2061609986432,124.054470001129 53.2034299986432,124.023220001129 53.1899949986432,124.010660001129 53.1872669986432,123.996560001129 53.1806529986432,123.986270001129 53.1733509986432,123.977880001129 53.1669619986432,123.971410001129 53.1639979986432,123.959980001129 53.1534959986432,123.957300001129 53.1441269986432,123.954620001129 53.1368179986432,123.951190001129 53.1311069986432,123.945470001129 53.1231159986432,123.940510001129 53.1167179986432,123.934430001129 53.1132969986432,123.924170001129 53.1073569986432,123.914280001129 53.0991359986432,123.908970001129 53.0950239986432,123.905550001129 53.0920559986432,123.897190001129 53.0861129986432,123.878210001129 53.0746959986432,123.871000001129 53.0703509986432,123.858480001129 53.0630379986432,123.846730001129 53.0541269986432,123.836870001129 53.0474969986432,123.825500001129 53.0378949986432,123.819820001129 53.0298919986432,123.817930001129 53.0255509986432,123.819820001129 53.0138969986432,123.831570001129 53.0093309986432,123.839520001129 53.0045359986432,123.844440001129 52.9981379986432,123.848980001129 52.9883159986432,123.848220001129 52.9819149986432,123.845570001129 52.9775729986432,123.836110001129 52.9755169986432,123.825520001129 52.9736819986432,123.817960001129 52.9702529986432,123.809250001129 52.9663659986432,123.799800001129 52.9569889986432,123.796400001129 52.9531019986432,123.786200001129 52.9437259986432,123.781670001129 52.9384689986432,123.776760001129 52.9332079986432,123.768460001129 52.9270319986432,123.760900001129 52.9224549986432,123.754870001129 52.9183349986432,123.744680001129 52.9105569986432,123.738270001129 52.9050669986432,123.732230001129 52.9016299986432,123.721290001129 52.8979639986432,123.711090001129 52.8990899986432,123.699380001129 52.8986169986432,123.695610001129 52.8967819986432,123.685420001129 52.8963089986432,123.679750001129 52.8967549986432,123.669550001129 52.8971939986432,123.663510001129 52.8967289986432,123.652580001129 52.8909949986432,123.640890001129 52.8861769986432,123.630710001129 52.8831829986432,123.620540001129 52.8795049986432,123.609250001129 52.8726269986432,123.603610001129 52.8680459986432,123.598350001129 52.8634639986432,123.587460001129 52.8529239986432,123.580350001129 52.8446809986432,123.573610001129 52.8357539986432,123.566870001129 52.8270529986432,123.561650001129 52.8188129986432,123.556040001129 52.8119429986432,123.547810001129 52.8023219986432,123.534690001129 52.7926859986432,123.528350001129 52.7828449986432,123.523880001129 52.7766609986432,123.516780001129 52.7695579986432,123.513770001129 52.7681769986432,123.494510001129 52.7751999986432,123.486230001129 52.7749439986432,123.474590001129 52.7703359986432,123.455120001129 52.7581519986432,123.453290001129 52.7524339986432,123.445820001129 52.7450979986432,123.443210001129 52.7423439986432,123.445880001129 52.7389299986432,123.455320001129 52.7353059986432,123.460620001129 52.7307549986432,123.464060001129 52.7259669986432,123.462590001129 52.7207069986432,123.459260001129 52.7149849986432,123.451810001129 52.7078739986432,123.450350001129 52.7023849986432,123.450000001129 52.6989589986432,123.449690001129 52.6914139986432,123.452010001129 52.6847949986432,123.449460001129 52.6756479986432,123.451770001129 52.6699449986432,123.456730001129 52.6608239986432,123.461280001129 52.6560399986432,123.464330001129 52.6501079986432,123.469290001129 52.6407619986432,123.473480001129 52.6341479986432,123.487170001129 52.6113429986432,123.491770001129 52.6001659986432,123.496730001129 52.5894429986432,123.504630001129 52.5855829986432,123.508780001129 52.5821689986432,123.512190001129 52.5780679986432,123.514110001129 52.5723609986432,123.513030001129 52.5664179986432,123.508220001129 52.5579449986432,123.507880001129 52.5533789986432,123.514660001129 52.5495149986432,123.522630001129 52.5349119986432,123.525660001129 52.5301249986432,123.529820001129 52.5232809986432,123.533230001129 52.5175819986432,123.532920001129 52.5082129986432,123.533350001129 52.5018199986432,123.532250001129 52.4976999986432,123.531890001129 52.4956439986432,123.534970001129 52.4826279986432,123.533880001129 52.4787409986432,123.527550001129 52.4746089986432,123.521240001129 52.4679639986432,123.510090001129 52.4583319986432,123.501890001129 52.4551119986432,123.491480001129 52.4482189986432,123.465350001129 52.4437939986432,123.457530001129 52.4407919986432,123.443730001129 52.4373169986432,123.420650001129 52.4292339986432,123.416560001129 52.4264759986432,123.408070001129 52.4161569986432,123.408970001129 52.4006269986432,123.406440001129 52.3921589986432,123.400920001129 52.3848299986432,123.393540001129 52.3763429986432,123.386120001129 52.3719709986432,123.373090001129 52.3694039986432,123.351860001129 52.3656539986432,123.337350001129 52.3623889986432,123.317280001129 52.3565829986432,123.295590001129 52.3603589986432,123.281100001129 52.3563999986432,123.268850001129 52.3515399986432,123.255470001129 52.3482699986432,123.243580001129 52.3447799986432,123.236180001129 52.3410839986432,123.225490001129 52.3318859986432,123.212510001129 52.3274689986432,123.185330001129 52.3252559986432,123.173760001129 52.3263279986432,123.164350001129 52.3324389986432,123.157920001129 52.3381119986432,123.151170001129 52.3408129986432,123.143710001129 52.3407629986432,123.137790001129 52.3379859986432,123.127040001129 52.3342629986432,123.112620001129 52.3273119986432,123.092920001129 52.3239819986432,123.081780001129 52.3216209986432,123.073620001129 52.3195109986432,123.060610001129 52.3171309986432,123.045360001129 52.3154259986432,123.031240001129 52.3132709986432,123.026420001129 52.3120879986432,123.013790001129 52.3097149986432,122.997060001129 52.3079869986432,122.991860001129 52.3072619986432,122.977750001129 52.3048669986432,122.952140001129 52.2998659986432,122.939870001129 52.2990879986432,122.925670001129 52.3012499986432,122.911530001129 52.3002239986432,122.901150001129 52.2978479986432,122.892370001129 52.2904619986432,122.887690001129 52.2831119986432,122.878920001129 52.2754969986432,122.867420001129 52.2733419986432,122.850300001129 52.2736469986432,122.843410001129 52.2651329986432,122.829800001129 52.2581559986432,122.801960001129 52.2551609986432,122.794930001129 52.2534939986432,122.780100001129 52.2513009986432)))";
	@Test
	public void testMuheCounty() {
		PolygonMock poly = new PolygonMock(muhe);
		CnicPIP pip = new CnicPIP();
		assertFalse(pip.contains(poly, new PointMock(115.698906,31.05309)));
	}
	@Test
	public void testCNIC_Esri_Prepare() throws Exception {
		PrintWriter out = new PrintWriter(new OutputStreamWriter(new FileOutputStream("/tmp/pip.conf")),true);
		out.println("ppd=100");
		out.println("pip.data_dir=/tmp/esri");
		out.println("pip.prepare=esri");
		out.close();
		pip = new CnicPIP();
		doTest();
	}

}
